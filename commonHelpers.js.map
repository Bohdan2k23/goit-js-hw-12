{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst url = \"https://pixabay.com/api/\";\n\nexport async function getImages(keyword, page = 1) {\n  const params = {\n    key: \"42543975-3eca36a47ffade116cf6655c4\",\n    q: keyword,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: 15,\n    page,\n  };\n  try {\n    const { data } = await axios.get(url, { params });\n\n    return data.hits;\n  } catch (error) {\n    return {\n      error: true,\n    };\n  }\n}\n\n// const data = fetch(url + '?' + params.toString()).then(e => e.json());\n","function createLi({ title, value }) {\n  return `<li class=\"flex-col flex-center\">\n            <span class=\"bold\">${title}</span>\n            <span>${value}</span>\n        </li>`;\n}\n\nfunction createItem({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  let list = [\n    { title: \"Likes\", value: likes },\n    { title: \"Views\", value: views },\n    { title: \"Comments\", value: comments },\n    { title: \"Downloads\", value: downloads },\n  ];\n\n  return `\n    <a href=\"${largeImageURL}\"  class=\"b-1 bc-gray over-hidden r-10\">\n        <img alt=\"${tags}\" src=\"${webformatURL}\" class=\"h-200 w-full\" alt=\"\" />\n        <ul class=\"flex-space p-4+20 fs-12\" >\n            ${list.map((e) => createLi(e)).join(\"\\n\")}\n        </ul>\n    </a>`;\n}\n\nconst buffer = document.createElement(\"div\");\n\n/** @param {HTMLElement} gallery */\nexport function render(imagesList, gallery) {\n  let html = \"\";\n\n  for (const item of imagesList) {\n    html += createItem(item);\n  }\n\n  buffer.innerHTML = html;\n  let children = [...buffer.children];\n  gallery.append(...children);\n\n  const rect = children[0].getBoundingClientRect();\n  scrollBy(0, rect.y);\n}\n","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api.js\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { render } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector(\"main\");\nconst loader = document.querySelector(\"#loader\");\nconst more = document.querySelector(\"#more\");\nlet page = 1;\nlet value = \"\";\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n\n  const input = form.elements.image;\n\n  if (input.value.trim()) {\n    value = input.value.trim();\n  }\n\n  if (!value) return;\n\n  loader.style.display = \"\";\n  more.style.display = \"none\";\n  const images = await getImages(value, page);\n\n  if (images.error) {\n    value = \"\";\n    loader.style.display = \"none\";\n    more.style.display = \"none\";\n    return iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: \"topRight\",\n    });\n  }\n\n  //показує загрузку бо не видно(\n  // await new Promise((res) => setTimeout(() => res(), 2000));\n\n  loader.style.display = \"none\";\n  more.style.display = \"\";\n  input.value = \"\";\n\n  if (images.length == 0) {\n    more.style.display = \"none\";\n    gallery.innerHTML = \"\";\n    return iziToast.error({\n      message:\n        \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"topRight\",\n    });\n  }\n\n  render(images, gallery);\n\n  const lightbox = new SimpleLightbox(\"main a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n  page++;\n}\n\nform.addEventListener(\"submit\", (ev) => {\n  gallery.innerHTML = \"\";\n  page = 1;\n  onSubmit(ev);\n});\nmore.addEventListener(\"click\", onSubmit);\n"],"names":["url","getImages","keyword","page","params","data","axios","createLi","title","value","createItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","e","buffer","render","imagesList","gallery","html","item","children","rect","form","loader","more","onSubmit","ev","input","images","iziToast","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAM,2BAEL,eAAeC,EAAUC,EAASC,EAAO,EAAG,CACjD,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACJ,EACE,GAAI,CACF,KAAM,CAAE,KAAAE,CAAM,EAAG,MAAMC,EAAM,IAAIN,EAAK,CAAE,OAAAI,CAAM,CAAE,EAEhD,OAAOC,EAAK,IACb,MAAe,CACd,MAAO,CACL,MAAO,EACb,CACG,CACH,CCvBA,SAASE,EAAS,CAAE,MAAAC,EAAO,MAAAC,GAAS,CAClC,MAAO;AAAA,iCACwBD,CAAK;AAAA,oBAClBC,CAAK;AAAA,cAEzB,CAEA,SAASC,EAAW,CAClB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CAQD,MAAO;AAAA,eACML,CAAa;AAAA,oBACRC,CAAI,UAAUF,CAAY;AAAA;AAAA,cATjC,CACT,CAAE,MAAO,QAAS,MAAOG,CAAO,EAChC,CAAE,MAAO,QAAS,MAAOC,CAAO,EAChC,CAAE,MAAO,WAAY,MAAOC,CAAU,EACtC,CAAE,MAAO,YAAa,MAAOC,CAAW,CAC5C,EAMmB,IAAKC,GAAMX,EAASW,CAAC,CAAC,EAAE,KAAK;AAAA,CAAI,CAAC;AAAA;AAAA,SAGrD,CAEA,MAAMC,EAAS,SAAS,cAAc,KAAK,EAGpC,SAASC,EAAOC,EAAYC,EAAS,CAC1C,IAAIC,EAAO,GAEX,UAAWC,KAAQH,EACjBE,GAAQb,EAAWc,CAAI,EAGzBL,EAAO,UAAYI,EACnB,IAAIE,EAAW,CAAC,GAAGN,EAAO,QAAQ,EAClCG,EAAQ,OAAO,GAAGG,CAAQ,EAE1B,MAAMC,EAAOD,EAAS,CAAC,EAAE,sBAAqB,EAC9C,SAAS,EAAGC,EAAK,CAAC,CACpB,CCrCA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCL,EAAU,SAAS,cAAc,MAAM,EACvCM,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,OAAO,EAC3C,IAAI1B,EAAO,EACPM,EAAQ,GAEZ,eAAeqB,EAASC,EAAI,CAC1BA,EAAG,eAAc,EAEjB,MAAMC,EAAQL,EAAK,SAAS,MAM5B,GAJIK,EAAM,MAAM,SACdvB,EAAQuB,EAAM,MAAM,QAGlB,CAACvB,EAAO,OAEZmB,EAAO,MAAM,QAAU,GACvBC,EAAK,MAAM,QAAU,OACrB,MAAMI,EAAS,MAAMhC,EAAUQ,EAAON,CAAI,EAE1C,GAAI8B,EAAO,MACT,OAAAxB,EAAQ,GACRmB,EAAO,MAAM,QAAU,OACvBC,EAAK,MAAM,QAAU,OACdK,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UAChB,CAAK,EAUH,GAJAN,EAAO,MAAM,QAAU,OACvBC,EAAK,MAAM,QAAU,GACrBG,EAAM,MAAQ,GAEVC,EAAO,QAAU,EACnB,OAAAJ,EAAK,MAAM,QAAU,OACrBP,EAAQ,UAAY,GACbY,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,UAChB,CAAK,EAGHd,EAAOa,EAAQX,CAAO,EAEL,IAAIa,EAAe,SAAU,CAC5C,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,EAChBhC,GACF,CAEAwB,EAAK,iBAAiB,SAAWI,GAAO,CACtCT,EAAQ,UAAY,GACpBnB,EAAO,EACP2B,EAASC,CAAE,CACb,CAAC,EACDF,EAAK,iBAAiB,QAASC,CAAQ"}